import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import java.util.StringTokenizer;
public class A
{
    public static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    public static StringTokenizer inp;
    public static void main(String[] args)  throws IOException
    {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        inp = new StringTokenizer(br.readLine());
        int n = nextInt();
        int m = nextInt();
        int s ,f ,t ,ans;
        for (int i = 0 ; i < n ; i++)
        {
            inp = new StringTokenizer(br.readLine());
            s = nextInt(); f = nextInt();t  = nextInt();
            ans = 0;
            if(s == f)
            {
                ans = t;
            }
            else if(f > s)
            {
                ans = t - t % (2*m-2);
                t = t%(2*m-2);
                if(t <= s-1)ans+=f-1;
                else ans+=2*m-2 + f-1;
                
                
//              ans[i] += (t[i])/(2*m-2)*(2*m-2);
//              t[i] = (t[i])%(2*m-2);
//              if(t[i]+1 > s[i]) ans[i]+=2*m-2 + f[i]-1;
//              else ans[i]+=f[i]-1;
                
//              ans[i] = f[i] + (2*m-2)*(int)(Math.ceil((double)(t[i])/(2*m-2))+1e-7)-1;
            }
            else
            {
                ans = m-1;
                s = m-s+1;
                f = m-f+1;
                t=Math.max(0, t-m+1);
                
                ans += t - t % (2*m-2);
                t = t%(2*m-2);
                if(t <= s-1)ans+=f-1;
                else ans+=2*m-2 + f-1;
//              ans[i] += (t[i])/(2*m-2)*(2*m-2);
//              t[i] = (t[i])%(2*m-2);
//              if(t[i]+1 > m+m-s[i])
//                  ans[i] = 2*m-2 + 2*m-1-f[i] ;
//              else
//                  ans[i] = 2*m-1 - f[i];
                
//              ans[i] = m;
//              f[i] = m-f[i];
//              s[i] = m-s[i];
//              ans[i] += f[i] + (2*m-2)*(int)(Math.ceil((double)(t[i])/(2*m-2))+1e-7)-1;
//              ans[i] = (2*m-2)*(int)(Math.ceil((double)(t[i])/(2*m-2))+1e-7) + m+m - f[i]-1;
            }
            System.out.println(ans);
        }
        
        
    }
    
    public static int nextInt(){return Integer.parseInt(inp.nextToken());}
    public static long nextLong(){return Long.parseLong(inp.nextToken());}
    public static double nextDouble(){return Double.parseDouble(inp.nextToken());}
    
}