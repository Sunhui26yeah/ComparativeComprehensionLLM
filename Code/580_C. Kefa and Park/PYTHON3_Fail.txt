[n,m]=[int(i) for i in input().split()];
a=[int(i) for i in input().split()];
v = [[] for i in range(n+1)]
r=0;
def go(j,mm):
    #print("go",j,mm);
    global r;
    if(a[j-1]):
        mm=mm+1;
        if(mm>m):
            return;
    else:
        if(mm>0):
            mm=0;
    if(not v[j]):
        r=r+1;
        return;
    for i in v[j]:
        go(i,mm);


for i in range(0,n-1):
    [j,k]=[int(i) for i in input().split()];
    v[min(j,k)].append(max(j,k));
go(1,0);
print(r);