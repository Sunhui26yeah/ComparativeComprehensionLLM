//TEMPLATE
import java.util.*;
import java.math.*;
import java.io.*;

public class Main {
    static Scanner scan;
    static String _file = "in.txt";
    public static void println(Object s){System.out.println(s);}
    public static void print(Object s){System.out.print(s);}
    public static int nextInt(){return scan.nextInt();}
    public static long nextLong(){return scan.nextLong();}
    
    public static int nextIntL(){int i = scan.nextInt(); scan.nextLine(); return i;}
    public static long nextLongL(){long i = scan.nextLong(); scan.nextLine(); return i;}

    public static String nextLine(){return scan.nextLine();}
    
    static void printArray(int arr[]) 
    { 
        int n = arr.length; 
        for (int i=0; i<n; ++i) 
            System.out.print(arr[i]+" "); 
        System.out.println(); 
    }

    public static void main(String[] args) {scan = new Scanner(System.in);solution();} //Uncomment This.
    //public static void main(String[] args) throws IOException{scan = new Scanner(new FileReader(_file));solution();} //Comment This.

    
    //Solution goes below:
	static ArrayList<ArrayList<Integer>> tree;
	static int[] cats;
	static int n,m;
    public static void solution(){
        n = nextInt();
		m = nextIntL();
		cats = new int[n];
		for(int i =0; i<n;i++){
			cats[i] = nextInt();
		}
		nextLine();
		tree = new ArrayList<ArrayList<Integer>>();
		for(int i =0; i<n;i++){
			tree.add(new ArrayList<Integer>());
		}
		for(int i=0;i<n-1;i++){
			int a = nextInt()-1;
			int b = nextInt()-1;
			tree.get(a).add(b);
			tree.get(b).add(a);
		}
		for(ArrayList<Integer> arr:tree){
			for(Integer i:arr){
				//print(i);
				//print(" ");
			}
			//println("");
		}
		for(int i:cats){
			//print(i);
		}
		//println("");
		println(DFS(0,-1,0));
    }
	public static int DFS(int pos, int src, int currcat){
		int currcats = currcat;
		//print(pos);
		if(cats[pos]==1){
			currcats+=1;
		}else{
			currcats = 0;
		}
		if(currcats>m){
			//println("Cats");
			return(0);
		}
		if(tree.get(pos).size()==1&&pos!=0){
			//println("Leaf");
			return(1);
		}
		int shops = 0;
		//println("Node");
		for(int node:tree.get(pos)){
			if(node!=src){
				shops+=DFS(node,pos,currcats);
			}
		}
		return(shops);
	}
}