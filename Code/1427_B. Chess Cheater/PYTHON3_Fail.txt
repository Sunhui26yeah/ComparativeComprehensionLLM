gans = []
for _ in range(int(input())):
    n, k = map(int, input().split())
    a = list(input())
    cnt = 1
    u = []
    ok = False
    ans = 0
    for i in range(1, n):
        if a[i] != a[i - 1]:
            if a[i - 1] == 'L':
                u.append([cnt, 0])
                if not ok:
                    u[0][1] = 1
            else:
                ans += cnt * 2 - 1
            cnt = 1
            ok = True
        else:
            cnt += 1
    if a[-1] == 'L':
        u.append([cnt, 1])
    else:
        ans += cnt * 2 - 1
    u.sort()
    if ans == 0:
        ans = 2 * k - min(2, k)
        gans.append(ans)
        continue
    for i in range(len(u)):
        if u[i][0] > k:
            ans += k * 2
            break
        k -= u[i][0]
        ans += u[i][0] * 2 + 1 - u[i][1]
    gans.append(ans)
print('\n'.join(map(str, gans)))