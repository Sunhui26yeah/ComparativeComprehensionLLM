import java.util.*;

public class Test 
{
	public static void main(String[] args) throws Exception
	{
		//System.out.println("Enter the number: ");
		Scanner scan = new Scanner(System.in);
		int t = scan.nextInt();
		while(t-->0)
		{
			int n = scan.nextInt();
			int k = scan.nextInt();
			scan.nextLine();
			String s = scan.nextLine();
			int currentScore = 0;
			int lossCount = 0;
			int wCount = 0;
			for (int i = 0; i < n; i++)
			{
				if(s.charAt(i) == 'W')
				{
					wCount++;
					if(i == 0 || s.charAt(i - 1) != 'W')
					{
						currentScore++;
					}
					else
					{
						currentScore = currentScore + 2;
					}
				}
				else
				{
					lossCount++;
				}
			}
			if(wCount >= n || k == 0)
			{
				System.out.println(currentScore);
			}
			else if(k >= n || lossCount <= k)
			{
				System.out.println((n * 2) - 1);
			}
			else if(currentScore == 0)
			{
				System.out.println((k * 2) - 1);
			}
			else
			{
				PriorityQueue<Integer> lossStreak = new PriorityQueue<Integer>();
				int count = -1000000;
				for (int i = 0; i < n; i++)
				{
					if(s.charAt(i) == 'L')
					{
						count++;
					}
					else
					{
						if(count > 0)
						{
							lossStreak.add(count);
						}
						count = 0;
					}
				}
				currentScore = currentScore + (k * 2);
				while(!lossStreak.isEmpty())
				{
					int temp = lossStreak.poll();
					if(temp > k)
					{
						break;	
					}
					else
					{
						currentScore++;
						k = k - temp;
					}
				}
				System.out.println(currentScore);
			}
		}	
	}
}