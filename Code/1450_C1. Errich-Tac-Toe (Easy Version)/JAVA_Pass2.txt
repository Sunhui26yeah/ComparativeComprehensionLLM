// package com.company;



import java.io.*;
import java.util.*;
import java.lang.Math;
import java.util.stream.Collectors;

public class Main <E> {

    public static void main(String[] args) {
        Main main = new Main();
        main.solve();
    }


    Map<Integer, Boolean> cache;

    long MODULE = 1000_000_000+7;
    public void solve() {

        Scanner in = null;
        PrintWriter out = null;
        try {
            in = new Scanner(new File("input.txt"));
            out = new PrintWriter(new File("output.txt"));
//                throw new FileNotFoundException();
        }
        catch (FileNotFoundException e) {
            in = new Scanner(System.in);
            out = new PrintWriter(System.out);
        }

        int t = in.nextInt();

        int nn = 300;

        int[][][] x = new int[nn][nn][16];


        for (int w = 0; w < 3; w++) {
            int so = w;
            for (int i = 0; i < nn; i++) {
                int si = so % 3;
                for (int j = 0; j < nn; j++) {
                    if (si == 0) {
                        x[i][j][w] = 1;
                    } else {
                        x[i][j][w] = 0;
                    }
                    si = (si + 1) % 3;
                }
                so = (so + 1) % 3;
            }
        }

        for (int w = 3; w < 6; w++) {
            int so = w - 3;
            for (int i = 0; i < nn; i++) {
                int si = so % 3;
                for (int j = 0; j < nn; j++) {
                    if (si == 0) {
                        x[i][j][w] = 0;
                    } else {
                        x[i][j][w] = 1;
                    }
                    si = (si + 1) % 3;
                }
                so = (so + 1) % 3;
            }
        }

        for (int w = 6; w < 8; w++) {
            int so = w - 6;
            for (int i = 0; i < nn; i++) {
                int si = so % 2;
                for (int j = 0; j < nn; j++) {
                    if (si == 0) {
                        x[i][j][w] = 0;
                    } else {
                        x[i][j][w] = 1;
                    }
                    si = (si + 1) % 2;
                }
                so = (so + 1) % 2;
            }
        }

        for (int w = 8; w < 11; w++) {
            int so = w - 8;
            boolean soflip = false;
            for (int i = 0; i < nn; i++) {
                int si = so % 2;
                boolean siflip = false;
                for (int j = 0; j < nn; j++) {
                    if (si == 0) {
                        x[i][j][w] = 1;
                    } else {
                        x[i][j][w] = 0;
                    }
                    if (!soflip) {
                        soflip = true;
                    } else {
                        soflip = false;
                        si = (si + 1) % 2;
                    }
                }
                if (!soflip) {
                    soflip = true;
                } else {
                    soflip = false;
                    so = (so + 1) % 2;
                }
            }
        }

        for (int w = 11; w < 14; w++) {
            int so = w - 11;
            boolean soflip = false;
            for (int i = 0; i < nn; i++) {
                int si = so % 2;
                boolean siflip = false;
                for (int j = 0; j < nn; j++) {
                    if (si == 0) {
                        x[i][j][w] = 0;
                    } else {
                        x[i][j][w] = 1;
                    }
                    if (!soflip) {
                        soflip = true;
                    } else {
                        soflip = false;
                        si = (si + 1) % 2;
                    }
                }
                if (!soflip) {
                    soflip = true;
                } else {
                    soflip = false;
                    so = (so + 1) % 2;
                }
            }
        }

        for (int w = 14; w < 16; w++) {
            int so = w - 14;
            boolean soflip = false;
            for (int i = 0; i < nn; i++) {
                int si = so % 2;
                boolean siflip = false;
                for (int j = 0; j < nn; j++) {
                    if (si == 0) {
                        x[i][j][w] = 0;
                    } else {
                        x[i][j][w] = 1;
                    }
                    if (!soflip) {
                        soflip = true;
                    } else {
                        soflip = false;
                        si = (si + 1) % 2;
                    }
                }
                so = (so + 1) % 2;
            }
        }


//        for (int w = 0; w < 16; w++) {
//            for (int i = 0; i < nn; i++) {
//                for (int j = 0; j < nn; j++) {
//                    out.print(x[i][j][w]);
//                }
//                out.println();
//            }
//            out.println();
//            out.println();
//        }

        int[][] a = new int[nn][nn];


        for (int ti = 0; ti < t; ti++) {
            int n = in.nextInt();
            in.nextLine();
            for (int i = 0; i < n; i++) {
                String s = in.nextLine();
                for (int j = 0; j < n; j++) {
                    char c = s.charAt(j);
                    if (c == 'X') {
                        a[i][j] = 0;
                    } else if (c == 'O') {
                        a[i][j] = 1;
                    } else {
                        a[i][j] = -1;
                    }
                }
            }

            int unitCount = findUnitCount(a, n);

            for (int w = 0; w < 16; w++) {
                int diff = 0;

                for (int i = 0; i < n; i++) {
                    for (int j = 0; j < n; j++) {
                        if (a[i][j] != -1) {
                            if (a[i][j] != x[i][j][w]) {
                                diff++;
                            }
                        }
                    }
                }

                if (diff <= unitCount / 3) {
                    for (int i = 0; i < n; i++) {
                        for (int j = 0; j < n; j++) {
                            if (a[i][j] == 0) {
                                if (x[i][j][w] == 0) {
                                    out.print('X');
                                } else {
                                    out.print('O');
                                }
                            } else if (a[i][j] == 1) {
                                out.print('O');
                            } else {
                                out.print('.');
                            }
                        }
                        out.println();
                    }
                    break;
                }

            }

        }


        out.flush();

        out.close();
    }

    private int findUnitCount(int[][] a, int n) {
        int cc = 0;
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (a[i][j] >= 0) {
                    cc++;
                }
            }
        }
        return cc;
    }


}